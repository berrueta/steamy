{% extends "debian/base.html" %}

{% block javascript %}
    <script type="text/javascript" src="/debian/static/js/results.js"></script>
{% endblock %}

{% block content %}
    <div class="result-search-again">
    <a href="{% url debian.views.index %}" class="fg-button ui-state-default
    ui-corner-all">Start a new search
    <span class="ui-icon ui-icon-refresh" style="display: inline-block;"></span></a>
    </div>
    <div class="subheader">
        <div class="ui-widget-content ui-corner-all">
		    <h3 class="subtitle ui-widget-subheader ui-corner-all">
                Source search results {% if filter %} (keyword: "{{filter}}") {% endif %}
            </h3>
	    </div>
    </div>
    {% for result in results %}
    <div class="result">
        <div class="result-header">
        <span class="result-number">#{{forloop.counter}}</span>
        <span style="font-weight:bold">
            <a href="{{result.sourceurilink}}">{{result.sourcename}} ({{result.sourcefullversion}})</a>
        </span>
        is version of <a href="{{result.usourceurilink}}">{{result.sourcename}}</a>
        <span class="ui-icon ui-icon-extlink" style="display: inline-block;"></span>
        <a class="wait" href="{% url debian.views.news result.sourcename|urlencode %}">
            <span class="ui-icon ui-icon-comment" style="display: inline-block;"></span>
        </a>
        <a class="wait" href="{% url debian.views.source_detail result.sourcename|urlencode,result.sourcefullversion|urlencode %}">
            <span class="ui-icon ui-icon-plusthick" style="display: inline-block;"></span>
        </a>
        </div>
        <ul>
        <li>
            <span class="result-label">Maintainer:</span>
            <a href="{{result.mainturilink}}">{{result.maintmail}}</a>
            <span class="ui-icon ui-icon-extlink" style="display: inline-block;"></span>
        </li>
        {% if result.sectionname and result.sectionurilink %}
        <li>
            <span class="result-label">Section:</span>
            <a href="{{result.sectionurilink}}">{{result.sectionname}}</a>
            <span class="ui-icon ui-icon-extlink" style="display: inline-block;"></span>
        </li>
        {% endif %}
        {% if result.homepage %}
        <li>
            <span class="result-label">Homepage:</span> 
            {{result.homepage|urlize}}
            <span class="ui-icon ui-icon-extlink" style="display: inline-block;"></span>
        </li>
        {% endif %}
        {% if result.distribution %}
        <li>
            <span class="result-label">Distribution:</span> 
            <a href="{{result.distributionurilink}}">{{result.distribution}}</a>
            <span class="ui-icon ui-icon-extlink" style="display: inline-block;"></span>
        </li>
        {% endif %}
        {% if result.area %}
        <li>
            <span class="result-label">Area:</span> 
            {{result.area}}
        </li>
        {% endif %}
        {% if result.priority %}
        <li>
            <span class="result-label">Priority:</span> 
            {{result.priority}}
        </li>
        {% endif %}
        <li>
            <span class="result-more">
            <a class="result-label" href="{{result.sourceurilink}}">More...</a>
            (build-depends, uploaders, files...)</span>
        </li>
        </ul>
    </div>
    {% empty %}
    <div class="no-matches">
        I'm sorry but no package matches your criteria. Why don't you 
        <a href="{% url debian.views.index %}">try again?</a>
    </div>
    {% endfor %}
    {% if query %}
	    <div class="ui-widget-content ui-corner-all">
		    <h3 class="subtitle ui-widget-subheader ui-corner-all">Query String</h3>
            <div class="querystring">
                {{query}}
            </div>
	    </div>
    {% endif %}
{% endblock %}
